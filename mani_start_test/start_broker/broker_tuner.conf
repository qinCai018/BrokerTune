# BrokerTuner - 完整的 Mosquitto Broker 配置文件
# 此文件可以直接用于启动 Broker: mosquitto -c broker_tuner.conf
# 
# 注意：这是一个完整的独立配置文件，不是 conf.d 下的片段配置文件

# ============================================
# 基本配置
# ============================================

# PID 文件位置（可选，用于前台运行时）
# pid_file /var/run/mosquitto_broker_tuner.pid

# ============================================
# 网络监听配置
# ============================================

# 监听端口 1883（MQTT 标准端口）
listener 1883

# 允许匿名连接（用于测试和开发）
allow_anonymous true

# ============================================
# 持久化配置
# ============================================

# 禁用持久化（测试环境，提高性能）
persistence false

# ============================================
# 日志配置
# ============================================

# 禁用日志输出（测试环境，减少磁盘IO）
log_type none

# 如果需要日志，可以使用以下配置：
# log_dest file /var/log/mosquitto/broker_tuner.log
# log_type all
# connection_messages true
# log_timestamp true

# ============================================
# $SYS 主题配置（用于性能监控）
# ============================================

# 每 10 秒发布一次 $SYS 主题消息
sys_interval 10

# ============================================
# 消息队列配置
# ============================================

# 最大飞行中的消息数（QoS > 0 的消息）
max_inflight_messages 100

# 最大队列消息数（0 表示无限制）
max_queued_messages 0

# ============================================
# 其他常用配置（可选）
# ============================================

# 最大客户端连接数（0 表示无限制）
# max_connections 1000

# 最大数据包大小（字节，0 表示无限制）
# max_packet_size 0

# 消息大小限制（字节，0 表示无限制）
# message_size_limit 0

# 保持连接时间（秒）
# keepalive_interval 60

# 自动断开空闲客户端（秒，0 表示禁用）
# autosave_interval 0

# ============================================
# 注意：
# - 此配置文件不包含 include_dir，因为它是独立配置文件
# - 如果需要添加其他配置项，请参考 Mosquitto 官方文档
# ============================================
