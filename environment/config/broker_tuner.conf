# BrokerTuner - Mosquitto配置文件模板
# 此文件是基础模板，训练过程中会动态添加配置参数
# 自动生成，训练过程中会保留最佳效果的配置
# 请不要手工修改，该文件可能会被覆盖

# ============================================
# 基本配置
# ============================================

# PID 文件位置（用于跟踪进程）
pid_file /tmp/mosquitto_broker_tuner.pid

# ============================================
# 网络监听配置
# ============================================

# 监听端口 1883（MQTT 标准端口）
listener 1883

# 允许匿名连接（用于训练和测试）
allow_anonymous true

# ============================================
# 持久化配置
# ============================================

# 持久化配置将由训练动态设置

# ============================================
# 日志配置
# ============================================

# 禁用日志输出（训练环境，减少磁盘IO）
log_type none

# 如果需要调试，可以取消注释以下行：
# log_dest file /tmp/mosquitto_broker_tuner.log
# log_type all
# connection_messages true
# log_timestamp true

# ============================================
# $SYS 主题配置（用于性能监控）
# ============================================

# 每 1 秒发布一次 $SYS 主题消息
# 说明：训练/采样需要足够密集的 $SYS 更新来估算 received_rate，避免大量空值与奖励失真
sys_interval 1

# ============================================
# 消息队列配置（训练过程中动态调整）
# ============================================

# QoS相关配置将由训练动态添加：
# max_inflight_messages
# max_inflight_bytes
# max_queued_messages
# max_queued_bytes
# queue_qos0_messages

# 内存配置将由训练动态添加：
# memory_limit
# autosave_interval

# 网络配置将由训练动态添加：
# set_tcp_nodelay

# 协议配置将由训练动态添加：
# max_packet_size
# message_size_limit

# ============================================
# 注意：
# - 此模板文件包含基础配置
# - 训练过程中会动态添加/修改可调参数
# - 每次训练都会基于此模板生成新的完整配置文件
# ============================================
persistence false

# ============================================
# 训练过程中动态调整的配置参数
# ============================================

max_inflight_messages 440
max_inflight_bytes 524288
max_queued_messages 15300
max_queued_bytes 114294784
queue_qos0_messages true
memory_limit 335544320
autosave_interval 3300
set_tcp_nodelay true
max_packet_size 5476352
